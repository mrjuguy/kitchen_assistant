---
description: Spawns a sub-agent to audit recent changes and generate a permanent review artifact.
---

# Code Review Workflow

1. **Setup & Context Loading**
   - Identify the feature or scope being reviewed (usually the current branch changes).
   - **Load Rules**: Read the content of `.agent/skills/code-review/SKILL.md` into your memory.
   - **Load Instructions**: Read `.agent/skills/spawn-child-agent/SKILL.md` to ensure correct invocation.

2. **Delegate to QA Bot**
   - **Action**: Use the `run_command` tool to execute `claude` CLI.
   - **Prompt Injection**: Construct the instruction by injecting the Rules you just read.
     > "You are the QA Bot.
     >
     > **AUDIT RULES (Follow Strictly):**
     > [Insert Content of code-review/SKILL.md here]
     >
     > **TASK:**
     > 1. Run `git diff --stat` and read the changed files.
     > 2. Read the active requirements file in `specs/` (e.g., `specs/issue_[ID].md`) to verify requirements.
     > 3. Critically analyze the code against the Audit Rules above.
     > 4. Generate a report in Markdown format.
     > 5. SAVE this report to `specs/reviews/YYYY-MM-DD-[feature_name].md`.
     > 6. Do not ask for permission to write the file, just do it."

3. **Analysis of Result**
   - Wait for the child agent to complete.
   - Read the file generated by the child agent.
   - Output a summary to the user: "Review generated at [path]. Verdict: [PASS/FAIL]."

4. **Auto-Fix (Optional)**
   - If the report lists minor issues, offer to fix them immediately in the main session.